<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <title>Simple fetch()</title>
  </head>
  <body>
	<script>
		// Call the fetch() method to fetch the image, and store it in a variable
		let promise = fetch('coffee.jpg');
		// Use a then() block to respond to the promise's successful completion
		// by taking the returned response and running blob() on it to transform it into a blob
		let promise2 = promise.then(function(response){
			// The promise fetch() does NOT reject on HTTP errors,
			// so we need to check the boolean Response.ok and throw manually a new Error()
			// for the promise2 to be rejected (for example when a 404 occurs).
			if (!response.ok){
				throw new Error(`HTTP error! status: $(response.status)`);
			} else {
				let blob = response.blob();
				console.log(response.ok);
				console.log(blob);
				return response.blob()
			}
		}).catch(function(err){
			console.log(err);
		});

	</script>
  </body>
</html>